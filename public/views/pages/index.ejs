<!DOCTYPE html> 
<html lang="en"> 
    <head>
        <% include ../partials/head %>     
        <script src="views/partials/client.js"></script>
        <link rel="stylesheet" href="css/style.css">
    </head> 
    <body ng-app="mean-mandelbrot-app" class="container-fullwidth">
        <header>        
            <% include ../partials/header %>    
        </header>
        <main>
            <!--<% include ../partials/mandelbrot %>-->
            <!--<% include ../partials/table %>-->
            <div ng-view></div>
        </main>
        <footer>        
            <% include ../partials/footer %>   
        </footer>
        <script>
            angular.module("mean-mandelbrot-app", ['ngRoute'])
            // Service
            .factory('Mandelbrots', ['$http', function($http) {
                return $http.get('/m');
            }])
            // Controller
            .controller('MandelbrotController', ['$scope', 'Mandelbrots', function ($scope, Mandelbrots) {
                Mandelbrots.success(function(data) {
                    $scope.mandelbrots = data;
                }).error(function(data, status) {
                    console.log(data, status);
                    $scope.mandelbrots = [];
                });
            }])
            .config(['$routeProvider', '$locationProvider', function ($routeProvider, $locationProvider) {
                $routeProvider
                    .when('/', {
                        templateUrl: 'mandelbrot.html',
                        controller: 'MandelbrotController'
                    })
                    .when('/table', {
                        templateUrl: 'table.html',
                        controller: 'MandelbrotController'
                    });
                    //$locationProvider.html5Mode(true);
            }]);
        </script>
    </body> 
</html>